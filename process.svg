<svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="-7.5 -8 893.84375 1458.96875" style="max-width: 893.84375px;" xmlns="http://www.w3.org/2000/svg" width="100%" id="mermaid-svg-1751016525420-8uar1zjq9"><style>#mermaid-svg-1751016525420-8uar1zjq9{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:rgba(204, 204, 204, 0.87);}#mermaid-svg-1751016525420-8uar1zjq9 .error-icon{fill:#bf616a;}#mermaid-svg-1751016525420-8uar1zjq9 .error-text{fill:#bf616a;stroke:#bf616a;}#mermaid-svg-1751016525420-8uar1zjq9 .edge-thickness-normal{stroke-width:2px;}#mermaid-svg-1751016525420-8uar1zjq9 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-svg-1751016525420-8uar1zjq9 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-svg-1751016525420-8uar1zjq9 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-svg-1751016525420-8uar1zjq9 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-svg-1751016525420-8uar1zjq9 .marker{fill:rgba(204, 204, 204, 0.87);stroke:rgba(204, 204, 204, 0.87);}#mermaid-svg-1751016525420-8uar1zjq9 .marker.cross{stroke:rgba(204, 204, 204, 0.87);}#mermaid-svg-1751016525420-8uar1zjq9 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-svg-1751016525420-8uar1zjq9 .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:rgba(204, 204, 204, 0.87);}#mermaid-svg-1751016525420-8uar1zjq9 .cluster-label text{fill:#ffffff;}#mermaid-svg-1751016525420-8uar1zjq9 .cluster-label span,#mermaid-svg-1751016525420-8uar1zjq9 p{color:#ffffff;}#mermaid-svg-1751016525420-8uar1zjq9 .label text,#mermaid-svg-1751016525420-8uar1zjq9 span,#mermaid-svg-1751016525420-8uar1zjq9 p{fill:rgba(204, 204, 204, 0.87);color:rgba(204, 204, 204, 0.87);}#mermaid-svg-1751016525420-8uar1zjq9 .node rect,#mermaid-svg-1751016525420-8uar1zjq9 .node circle,#mermaid-svg-1751016525420-8uar1zjq9 .node ellipse,#mermaid-svg-1751016525420-8uar1zjq9 .node polygon,#mermaid-svg-1751016525420-8uar1zjq9 .node path{fill:#1a1a1a;stroke:#2a2a2a;stroke-width:1px;}#mermaid-svg-1751016525420-8uar1zjq9 .flowchart-label text{text-anchor:middle;}#mermaid-svg-1751016525420-8uar1zjq9 .node .label{text-align:center;}#mermaid-svg-1751016525420-8uar1zjq9 .node.clickable{cursor:pointer;}#mermaid-svg-1751016525420-8uar1zjq9 .arrowheadPath{fill:#e5e5e5;}#mermaid-svg-1751016525420-8uar1zjq9 .edgePath .path{stroke:rgba(204, 204, 204, 0.87);stroke-width:2.0px;}#mermaid-svg-1751016525420-8uar1zjq9 .flowchart-link{stroke:rgba(204, 204, 204, 0.87);fill:none;}#mermaid-svg-1751016525420-8uar1zjq9 .edgeLabel{background-color:#1a1a1a99;text-align:center;}#mermaid-svg-1751016525420-8uar1zjq9 .edgeLabel rect{opacity:0.5;background-color:#1a1a1a99;fill:#1a1a1a99;}#mermaid-svg-1751016525420-8uar1zjq9 .labelBkg{background-color:rgba(26, 26, 26, 0.5);}#mermaid-svg-1751016525420-8uar1zjq9 .cluster rect{fill:rgba(64, 64, 64, 0.47);stroke:#30373a;stroke-width:1px;}#mermaid-svg-1751016525420-8uar1zjq9 .cluster text{fill:#ffffff;}#mermaid-svg-1751016525420-8uar1zjq9 .cluster span,#mermaid-svg-1751016525420-8uar1zjq9 p{color:#ffffff;}#mermaid-svg-1751016525420-8uar1zjq9 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:#88c0d0;border:1px solid #30373a;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-svg-1751016525420-8uar1zjq9 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:rgba(204, 204, 204, 0.87);}#mermaid-svg-1751016525420-8uar1zjq9 :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}#mermaid-svg-1751016525420-8uar1zjq9 .default&gt;*{fill:#FFFFFF!important;stroke:#000000!important;color:#000000!important;}#mermaid-svg-1751016525420-8uar1zjq9 .default span{fill:#FFFFFF!important;stroke:#000000!important;color:#000000!important;}#mermaid-svg-1751016525420-8uar1zjq9 .default tspan{fill:#000000!important;}</style><g><marker orient="auto" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="6" viewBox="0 0 10 10" class="marker flowchart" id="mermaid-svg-1751016525420-8uar1zjq9_flowchart-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"/></marker><marker orient="auto" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart" id="mermaid-svg-1751016525420-8uar1zjq9_flowchart-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart" id="mermaid-svg-1751016525420-8uar1zjq9_flowchart-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart" id="mermaid-svg-1751016525420-8uar1zjq9_flowchart-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart" id="mermaid-svg-1751016525420-8uar1zjq9_flowchart-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart" id="mermaid-svg-1751016525420-8uar1zjq9_flowchart-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"/></marker><g class="root"><g class="clusters"/><g class="edgePaths"/><g class="edgeLabels"/><g class="nodes"><g transform="translate(-7.5, -8)" class="root"><g class="clusters"><g id="立即处理Action迭代器" class="cluster default flowchart-label"><rect height="1442.96875" width="877.84375" y="8" x="8" ry="0" rx="0" style=""/><g transform="translate(368.125, 8)" class="cluster-label"><foreignObject height="22" width="157.59375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">立即处理Action迭代器</span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#mermaid-svg-1751016525420-8uar1zjq9_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-A1 LE-A2" id="L-A1-A2-0" d="M172.734,924.438L172.734,928.604C172.734,932.771,172.734,941.104,172.734,948.804C172.734,956.504,172.734,963.571,172.734,967.104L172.734,970.638"/><path marker-end="url(#mermaid-svg-1751016525420-8uar1zjq9_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-A2 LE-A3" id="L-A2-A3-0" d="M172.734,1009.938L172.734,1014.354C172.734,1018.771,172.734,1027.604,172.734,1046.265C172.734,1064.926,172.734,1093.415,172.734,1107.659L172.734,1121.903"/><path marker-end="url(#mermaid-svg-1751016525420-8uar1zjq9_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-A3 LE-A4" id="L-A3-A4-0" d="M172.734,1164.203L172.734,1181.164C172.734,1198.125,172.734,1232.047,172.734,1254.124C172.734,1276.202,172.734,1286.435,172.734,1291.552L172.734,1296.669"/><path marker-end="url(#mermaid-svg-1751016525420-8uar1zjq9_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-A4 LE-A5" id="L-A4-A5-0" d="M172.734,1338.969L172.734,1343.135C172.734,1347.302,172.734,1355.635,172.734,1363.085C172.734,1370.535,172.734,1377.102,172.734,1380.385L172.734,1383.669"/><path marker-end="url(#mermaid-svg-1751016525420-8uar1zjq9_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-B1 LE-B2" id="L-B1-B2-0" d="M500.969,837.438L500.969,841.604C500.969,845.771,500.969,854.104,500.969,861.554C500.969,869.004,500.969,875.571,500.969,878.854L500.969,882.138"/><path marker-end="url(#mermaid-svg-1751016525420-8uar1zjq9_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-B2 LE-B3" id="L-B2-B3-0" d="M500.969,924.438L500.969,928.604C500.969,932.771,500.969,941.104,500.969,948.554C500.969,956.004,500.969,962.571,500.969,965.854L500.969,969.138"/><path marker-end="url(#mermaid-svg-1751016525420-8uar1zjq9_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-B3 LE-B4" id="L-B3-B4-0" d="M500.969,1011.438L500.969,1015.604C500.969,1019.771,500.969,1028.104,501.035,1035.638C501.101,1043.171,501.233,1049.905,501.299,1053.272L501.365,1056.639"/><path marker-end="url(#mermaid-svg-1751016525420-8uar1zjq9_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-B4 LE-B5" id="L-B4-B5-0" d="M536.678,1195.259L545.114,1207.044C553.549,1218.829,570.419,1242.399,578.854,1259.3C587.289,1276.202,587.289,1286.435,587.289,1291.552L587.289,1296.669"/><path marker-end="url(#mermaid-svg-1751016525420-8uar1zjq9_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-B4 LE-B6" id="L-B4-B6-0" d="M466.259,1195.259L457.657,1207.044C449.055,1218.829,431.852,1242.399,423.25,1263.267C414.648,1284.135,414.648,1302.302,414.648,1318.635C414.648,1334.969,414.648,1349.469,422.624,1360.738C430.599,1372.007,446.55,1380.045,454.526,1384.064L462.501,1388.084"/><path marker-end="url(#mermaid-svg-1751016525420-8uar1zjq9_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-B5 LE-B6" id="L-B5-B6-0" d="M587.289,1338.969L587.289,1343.135C587.289,1347.302,587.289,1355.635,579.314,1363.821C571.338,1372.007,555.387,1380.045,547.412,1384.064L539.436,1388.084"/><path marker-end="url(#mermaid-svg-1751016525420-8uar1zjq9_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-C1 LE-C2" id="L-C1-C2-0" d="M599.129,70L599.129,74.167C599.129,78.333,599.129,86.667,599.129,94.117C599.129,101.567,599.129,108.133,599.129,111.417L599.129,114.7"/><path marker-end="url(#mermaid-svg-1751016525420-8uar1zjq9_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-C2 LE-C3" id="L-C2-C3-0" d="M599.129,157L599.129,161.167C599.129,165.333,599.129,173.667,599.129,181.117C599.129,188.567,599.129,195.133,599.129,198.417L599.129,201.7"/><path marker-end="url(#mermaid-svg-1751016525420-8uar1zjq9_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-C3 LE-C4" id="L-C3-C4-0" d="M599.129,241L599.129,245.167C599.129,249.333,599.129,257.667,599.129,265.117C599.129,272.567,599.129,279.133,599.129,282.417L599.129,285.7"/><path marker-end="url(#mermaid-svg-1751016525420-8uar1zjq9_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-C4 LE-C5" id="L-C4-C5-0" d="M599.129,325L599.129,329.167C599.129,333.333,599.129,341.667,599.129,349.117C599.129,356.567,599.129,363.133,599.129,366.417L599.129,369.7"/><path marker-end="url(#mermaid-svg-1751016525420-8uar1zjq9_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-C5 LE-C6" id="L-C5-C6-0" d="M599.129,412L599.129,416.167C599.129,420.333,599.129,428.667,599.195,436.2C599.261,443.734,599.393,450.467,599.459,453.834L599.525,457.201"/><path marker-end="url(#mermaid-svg-1751016525420-8uar1zjq9_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-C6 LE-C7" id="L-C6-C7-0" d="M559.9,605.209L550.078,617.747C540.256,630.285,520.613,655.361,510.791,673.016C500.969,690.671,500.969,700.904,500.969,706.021L500.969,711.138"/><path marker-end="url(#mermaid-svg-1751016525420-8uar1zjq9_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-C7 LE-B1" id="L-C7-B1-0" d="M500.969,753.438L500.969,757.604C500.969,761.771,500.969,770.104,500.969,777.554C500.969,785.004,500.969,791.571,500.969,794.854L500.969,798.138"/><path marker-end="url(#mermaid-svg-1751016525420-8uar1zjq9_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-C6 LE-C8" id="L-C6-C8-0" d="M645.974,598.592L660.065,612.233C674.156,625.874,702.338,653.156,716.429,671.913C730.52,690.671,730.52,700.904,730.52,706.021L730.52,711.138"/></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(587.2890625, 1265.96875)" class="edgeLabel"><g transform="translate(-8, -11)" class="label"><foreignObject height="22" width="16"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">是</span></div></foreignObject></g></g><g transform="translate(414.6484375, 1320.46875)" class="edgeLabel"><g transform="translate(-8, -11)" class="label"><foreignObject height="22" width="16"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">否</span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(500.96875, 680.4375)" class="edgeLabel"><g transform="translate(-8, -11)" class="label"><foreignObject height="22" width="16"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">是</span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(730.51953125, 680.4375)" class="edgeLabel"><g transform="translate(-8, -11)" class="label"><foreignObject height="22" width="16"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">否</span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(172.734375, 992.9375)" id="flowchart-A2-3130" class="node default default flowchart-label"><rect height="34" width="139.640625" y="-17" x="-69.8203125" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-62.3203125, -9.5)" style="" class="label"><rect/><foreignObject height="19" width="124.640625"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">agent.step(state)</span></div></foreignObject></g></g><g transform="translate(172.734375, 905.9375)" id="flowchart-A1-3129" class="node default default flowchart-label"><rect height="37" width="172.125" y="-18.5" x="-86.0625" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-78.5625, -11)" style="" class="label"><rect/><foreignObject height="22" width="157.125"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">controller._step()调用</span></div></foreignObject></g></g><g transform="translate(172.734375, 1145.703125)" id="flowchart-A3-3132" class="node default default flowchart-label"><rect height="37" width="140.59375" y="-18.5" x="-70.296875" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-62.796875, -11)" style="" class="label"><rect/><foreignObject height="22" width="125.59375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">返回Action迭代器</span></div></foreignObject></g></g><g transform="translate(172.734375, 1320.46875)" id="flowchart-A4-3134" class="node default default flowchart-label"><rect height="37" width="259.46875" y="-18.5" x="-129.734375" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-122.234375, -11)" style="" class="label"><rect/><foreignObject height="22" width="244.46875"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">保存迭代器到self._action_iterator</span></div></foreignObject></g></g><g transform="translate(172.734375, 1407.46875)" id="flowchart-A5-3136" class="node default default flowchart-label"><rect height="37" width="213.640625" y="-18.5" x="-106.8203125" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-99.3203125, -11)" style="" class="label"><rect/><foreignObject height="22" width="198.640625"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">调用_process_next_action()</span></div></foreignObject></g></g><g transform="translate(500.96875, 820.4375)" id="flowchart-B1-3137" class="node default default flowchart-label"><rect height="34" width="181.640625" y="-17" x="-90.8203125" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-83.3203125, -9.5)" style="" class="label"><rect/><foreignObject height="19" width="166.640625"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">_process_next_action()</span></div></foreignObject></g></g><g transform="translate(500.96875, 905.9375)" id="flowchart-B2-3138" class="node default default flowchart-label"><rect height="37" width="203.5625" y="-18.5" x="-101.78125" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-94.28125, -11)" style="" class="label"><rect/><foreignObject height="22" width="188.5625"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">从迭代器获取下一个action</span></div></foreignObject></g></g><g transform="translate(500.96875, 992.9375)" id="flowchart-B3-3140" class="node default default flowchart-label"><rect height="37" width="91.5625" y="-18.5" x="-45.78125" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-38.28125, -11)" style="" class="label"><rect/><foreignObject height="22" width="76.5625"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">处理action</span></div></foreignObject></g></g><g transform="translate(500.96875, 1145.703125)" id="flowchart-B4-3142" class="node default default flowchart-label"><polygon style="" transform="translate(-84.265625,84.265625)" class="label-container" points="84.265625,0 168.53125,-84.265625 84.265625,-168.53125 0,-84.265625"/><g transform="translate(-59.765625, -9.5)" style="" class="label"><rect/><foreignObject height="19" width="119.53125"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">action.runnable?</span></div></foreignObject></g></g><g transform="translate(587.2890625, 1320.46875)" id="flowchart-B5-3144" class="node default default flowchart-label"><rect height="37" width="259.28125" y="-18.5" x="-129.640625" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-122.140625, -11)" style="" class="label"><rect/><foreignObject height="22" width="244.28125"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">设置self._pending_action = action</span></div></foreignObject></g></g><g transform="translate(500.96875, 1407.46875)" id="flowchart-B6-3146" class="node default default flowchart-label"><rect height="34" width="308.546875" y="-17" x="-154.2734375" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-146.7734375, -9.5)" style="" class="label"><rect/><foreignObject height="19" width="293.546875"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">event_stream.add_event(action, AGENT)</span></div></foreignObject></g></g><g transform="translate(599.12890625, 51.5)" id="flowchart-C1-3149" class="node default default flowchart-label"><rect height="37" width="150.8125" y="-18.5" x="-75.40625" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-67.90625, -11)" style="" class="label"><rect/><foreignObject height="22" width="135.8125"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Runtime执行action</span></div></foreignObject></g></g><g transform="translate(599.12890625, 138.5)" id="flowchart-C2-3150" class="node default default flowchart-label"><rect height="37" width="130.40625" y="-18.5" x="-65.203125" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-57.703125, -11)" style="" class="label"><rect/><foreignObject height="22" width="115.40625"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">生成observation</span></div></foreignObject></g></g><g transform="translate(599.12890625, 224)" id="flowchart-C3-3152" class="node default default flowchart-label"><rect height="34" width="402.296875" y="-17" x="-201.1484375" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-193.6484375, -9.5)" style="" class="label"><rect/><foreignObject height="19" width="387.296875"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">event_stream.add_event(observation, ENVIRONMENT)</span></div></foreignObject></g></g><g transform="translate(599.12890625, 308)" id="flowchart-C4-3154" class="node default default flowchart-label"><rect height="34" width="249.703125" y="-17" x="-124.8515625" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-117.3515625, -9.5)" style="" class="label"><rect/><foreignObject height="19" width="234.703125"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">controller._handle_observation()</span></div></foreignObject></g></g><g transform="translate(599.12890625, 393.5)" id="flowchart-C5-3156" class="node default default flowchart-label"><rect height="37" width="196.6875" y="-18.5" x="-98.34375" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-90.84375, -11)" style="" class="label"><rect/><foreignObject height="22" width="181.6875"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">清除self._pending_action</span></div></foreignObject></g></g><g transform="translate(599.12890625, 553.21875)" id="flowchart-C6-3158" class="node default default flowchart-label"><polygon style="" transform="translate(-91.21875,91.21875)" class="label-container" points="91.21875,0 182.4375,-91.21875 91.21875,-182.4375 0,-91.21875"/><g transform="translate(-65.21875, -11)" style="" class="label"><rect/><foreignObject height="22" width="130.4375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">还有下一个action?</span></div></foreignObject></g></g><g transform="translate(500.96875, 734.9375)" id="flowchart-C7-3160" class="node default default flowchart-label"><rect height="37" width="213.640625" y="-18.5" x="-106.8203125" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-99.3203125, -11)" style="" class="label"><rect/><foreignObject height="22" width="198.640625"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">调用_process_next_action()</span></div></foreignObject></g></g><g transform="translate(730.51953125, 734.9375)" id="flowchart-C8-3164" class="node default default flowchart-label"><rect height="37" width="79" y="-18.5" x="-39.5" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-32, -11)" style="" class="label"><rect/><foreignObject height="22" width="64"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">结束处理</span></div></foreignObject></g></g></g></g></g></g></g></svg>